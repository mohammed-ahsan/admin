import{b as r,n as P}from"./toast-33DDocbW.js";import{r as s,A as F,S as G,d as f}from"./index-kaEKLpWB.js";const $=g=>{const{dispatch:h}=s.useContext(F),[x,n]=s.useState([]),[C,o]=s.useState(""),[T,i]=s.useState(!0),{invoice:w,status:E,zone:S,time:y,source:U,limitData:k,startDate:v,endDate:A,method:D,isUpdate:I,setIsUpdate:L,currentPage:_,category:b,searchText:j,sortedField:z}=s.useContext(G),N=e=>{var a,t,c,l,d,u,m,p;if(console.log("handleErrorNotificationTwo",e),((t=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:t.message)==="jwt expired"||((l=(c=e==null?void 0:e.response)==null?void 0:c.data)==null?void 0:l.message)==="jwt malformed"||((u=(d=e==null?void 0:e.response)==null?void 0:d.data)==null?void 0:u.message)==="invalid signature"||((p=(m=e==null?void 0:e.response)==null?void 0:m.data)==null?void 0:p.message)==="Unauthorized Access!"){h({type:"USER_LOGOUT"}),f.remove("_adminInfo"),f.remove("_cname"),P("Your Session is expired! Please Click on Login again");const O=setTimeout(()=>{window.location.replace("https://http://localhost:4100/login")},2500);return()=>clearTimeout(O)}};return s.useEffect(()=>{let e=!1,a=r.CancelToken.source();return(async()=>{try{const t=await g({cancelToken:a.token});e||(n(t),o(""),i(!1))}catch(t){e||(o(t.message),N(t),r.isCancel(t)?(o(t.message),i(!1),n([])):(o(t.message),i(!1),n([])))}})(),L(!1),()=>{e=!0,a.cancel("Cancelled in cleanup")}},[w,E,S,y,D,U,k,v,A,I,_,b,j,z]),{data:x,error:C,loading:T}};export{$ as u};
